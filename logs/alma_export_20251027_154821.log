2025-10-27 15:48:21 - root - INFO - setup_logging:64 - ==================================================
2025-10-27 15:48:21 - root - INFO - setup_logging:65 - Alma Digital Title Export Application Started
2025-10-27 15:48:21 - root - INFO - setup_logging:66 - Log file: logs/alma_export_20251027_154821.log
2025-10-27 15:48:21 - root - INFO - setup_logging:67 - ==================================================
2025-10-27 15:48:21 - __main__ - INFO - <module>:755 - Application startup
2025-10-27 15:48:21 - __main__ - INFO - <module>:756 - Log file location: logs/alma_export_20251027_154821.log
2025-10-27 15:48:21 - asyncio - DEBUG - __init__:64 - Using selector: KqueueSelector
2025-10-27 15:48:21 - flet - INFO - __get_assets_dir_path:371 - Assets path configured: /Users/mcfatem/GitHub/alma-export-to-CSV/assets
2025-10-27 15:48:21 - flet - DEBUG - __init__:20 - Creating new PubSubHub instance
2025-10-27 15:48:21 - flet - DEBUG - __init__:20 - Creating new PubSubHub instance
2025-10-27 15:48:21 - flet - INFO - start:72 - Starting up UDS server on /var/folders/jc/p0y112bn30v3kkx1vfcvhczm5kr3r4/T/u5IdMsSMzg
2025-10-27 15:48:21 - flet - INFO - app_async:171 - Flet app has started...
2025-10-27 15:48:21 - flet - INFO - on_app_startup:131 - App URL: /var/folders/jc/p0y112bn30v3kkx1vfcvhczm5kr3r4/T/u5IdMsSMzg
2025-10-27 15:48:21 - flet_desktop - INFO - __locate_and_unpack_flet_view:62 - Starting Flet View app...
2025-10-27 15:48:21 - flet_desktop - INFO - __locate_and_unpack_flet_view:142 - Flet View found in: /Users/mcfatem/.flet/bin/flet-0.28.3
2025-10-27 15:48:21 - flet - DEBUG - handle_connection:88 - Connected new TCP client
2025-10-27 15:48:21 - flet - DEBUG - __on_message:121 - _on_message: {"action":"registerWebClient","payload":{"pageName":"var/folders","pageRoute":"/","pageWidth":"800.0","pageHeight":"600.0","windowWidth":"800.0","windowHeight":"628.0","windowTop":"134.0","windowLeft":"3992.0","isPWA":"false","isWeb":"false","isDebug":"false","platform":"macos","platformBrightness":"light","media":"{\"padding\":{\"top\":0.0,\"right\":0.0,\"bottom\":0.0,\"left\":0.0},\"view_padding\":{\"top\":0.0,\"right\":0.0,\"bottom\":0.0,\"left\":0.0},\"view_insets\":{\"top\":0.0,\"right\":0.0,\"bottom\":0.0,\"left\":0.0}}","sessionId":""}}
2025-10-27 15:48:21 - flet - DEBUG - __send:177 - __send: {"action":"registerWebClient","payload":{"session":{"id":"","controls":{"page":{"i":"page","t":"page","p":"","c":[],"route":"/","width":"800.0","height":"600.0","windowwidth":"800.0","windowheight":"628.0","windowtop":"134.0","windowleft":"3992.0","pwa":"false","web":"false","debug":"false","platform":"macos","platformBrightness":"light","media":"{\"padding\":{\"top\":0.0,\"right\":0.0,\"bottom\":0.0,\"left\":0.0},\"view_padding\":{\"top\":0.0,\"right\":0.0,\"bottom\":0.0,\"left\":0.0},\"view_insets\":{\"top\":0.0,\"right\":0.0,\"bottom\":0.0,\"left\":0.0}}"}}},"error":"","appInactive":false}}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'route'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'pwa'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'web'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'debug'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'platform'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'platformBrightness'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'media'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'width'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'height'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'windowWidth'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'windowHeight'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'windowTop'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'windowLeft'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'clientIP'] {}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: get ['page', 'clientUserAgent'] {}
2025-10-27 15:48:21 - flet - INFO - on_session_created:240 - App session started
2025-10-27 15:48:21 - __main__ - INFO - main:743 - Starting Flet application
2025-10-27 15:48:21 - __main__ - DEBUG - main:744 - Page details - title: None, theme: ThemeMode.SYSTEM
2025-10-27 15:48:21 - flet - DEBUG - __send_loop:114 - sent to TCP: 604
2025-10-27 15:48:21 - __main__.AlmaExportApp - INFO - __init__:498 - Initializing AlmaExportApp
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: set ['page'] {'title': 'Alma Digital Title Export to CSV'}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: add [] {'to': 'page', 'at': '0'}
2025-10-27 15:48:21 - flet - DEBUG - _process_command:85 - _process_command: add [] {'to': 'page', 'at': '1'}
2025-10-27 15:48:21 - flet - DEBUG - __send:177 - __send: {"action":"pageControlsBatch","payload":[{"action":"updateControlProps","payload":{"props":[{"i":"page","title":"Alma Digital Title Export to CSV"}]}},{"action":"addPageControls","payload":{"controls":[{"t":"view","i":"_1","p":"page","c":["_2"],"at":"0","padding":"20","scroll":"adaptive"},{"t":"container","i":"_2","p":"_1","c":["_3"],"padding":"20"},{"t":"column","i":"_3","p":"_2","c":["_4","_5","_6","_7","_8","_9","_10","_13","_14","_15","_16","_17","_18"],"horizontalalignment":"start","n":"content","spacing":"10"},{"t":"text","i":"_4","p":"_3","c":[],"color":"blue900","size":"24","value":"Alma Digital Title Export to CSV","weight":"bold"},{"t":"divider","i":"_5","p":"_3","c":[],"color":"blue200","height":"20"},{"t":"text","i":"_6","p":"_3","c":[],"color":"grey700","size":"14","value":"Load MMS IDs from CSV file and export metadata to CSV"},{"t":"container","i":"_7","p":"_3","c":[],"height":"20"},{"t":"textfield","i":"_8","p":"_3","c":[],"canrevealpassword":"true","hinttext":"Enter your Alma API key","label":"Alma API Key","password":"true","value":"l8xx948a6fc96754492f89820aa25a064b06","width":"400"},{"t":"container","i":"_9","p":"_3","c":[],"height":"10"},{"t":"row","i":"_10","p":"_3","c":["_11","_12"],"spacing":"10"},{"t":"textfield","i":"_11","p":"_10","c":[],"hinttext":"No file selected","label":"MMS ID CSV File","readonly":"true","width":"400"},{"t":"elevatedbutton","i":"_12","p":"_10","c":[],"icon":"folder_open","style":"{\"padding\":{},\"side\":{},\"shape\":{},\"text_style\":{}}","text":"Select CSV File"},{"t":"container","i":"_13","p":"_3","c":[],"height":"10"},{"t":"elevatedbutton","i":"_14","p":"_3","c":[],"icon":"download","style":"{\"padding\":{},\"side\":{},\"shape\":{},\"text_style\":{}}","text":"Export Records"},{"t":"progressbar","i":"_15","p":"_3","c":[],"visible":"false","width":"400"},{"t":"container","i":"_16","p":"_3","c":[],"height":"20"},{"t":"text","i":"_17","p":"_3","c":[],"color":"blue700","size":"14"},{"t":"text","i":"_18","p":"_3","c":[],"selectable":"true","size":"14"}],"trimIDs":[]}},{"action":"addPageControls","payload":{"controls":[{"t":"offstage","i":"_19","p":"page","c":["_20"],"at":"1"},{"t":"filepicker","i":"_20","p":"_19","c":[],"upload":"[]"}],"trimIDs":[]}}]}
2025-10-27 15:48:21 - __main__ - INFO - main:748 - Application initialized successfully
2025-10-27 15:48:21 - flet - DEBUG - __send_loop:114 - sent to TCP: 2242
2025-10-27 15:48:24 - flet - DEBUG - __on_message:121 - _on_message: {"action":"pageEventFromWeb","payload":{"eventTarget":"_11","eventName":"focus","eventData":null}}
2025-10-27 15:48:24 - flet - DEBUG - on_event_async:856 - page.on_event_async: _11 focus None
2025-10-27 15:48:24 - flet - DEBUG - __on_message:121 - _on_message: {"action":"pageEventFromWeb","payload":{"eventTarget":"_11","eventName":"click","eventData":null}}
2025-10-27 15:48:24 - flet - DEBUG - on_event_async:856 - page.on_event_async: _11 click None
2025-10-27 15:48:26 - flet - DEBUG - __on_message:121 - _on_message: {"action":"pageEventFromWeb","payload":{"eventTarget":"_11","eventName":"blur","eventData":null}}
2025-10-27 15:48:26 - flet - DEBUG - on_event_async:856 - page.on_event_async: _11 blur None
2025-10-27 15:48:26 - flet - DEBUG - __on_message:121 - _on_message: {"action":"pageEventFromWeb","payload":{"eventTarget":"_12","eventName":"click","eventData":null}}
2025-10-27 15:48:26 - flet - DEBUG - on_event_async:856 - page.on_event_async: _12 click None
2025-10-27 15:48:26 - flet - DEBUG - _process_command:85 - _process_command: set ['_20'] {'allowedextensions': '["csv"]', 'allowmultiple': 'false', 'dialogtitle': 'Select CSV file with MMS IDs', 'filetype': 'any', 'state': 'pickFiles'}
2025-10-27 15:48:26 - flet - DEBUG - __send:177 - __send: {"action":"pageControlsBatch","payload":[{"action":"updateControlProps","payload":{"props":[{"i":"_20","allowedextensions":"[\"csv\"]","allowmultiple":"false","dialogtitle":"Select CSV file with MMS IDs","filetype":"any","state":"pickFiles"}]}}]}
2025-10-27 15:48:26 - flet - DEBUG - __send_loop:114 - sent to TCP: 250
2025-10-27 15:48:26 - flet - DEBUG - __on_message:121 - _on_message: {"action":"pageEventFromWeb","payload":{"eventTarget":"page","eventName":"error","eventData":"PlatformException(ENTITLEMENT_NOT_FOUND, Either the Read-Only or Read-Write entitlement is required for this action., null, null)"}}
2025-10-27 15:48:26 - flet - DEBUG - on_event_async:856 - page.on_event_async: page error PlatformException(ENTITLEMENT_NOT_FOUND, Either the Read-Only or Read-Write entitlement is required for this action., null, null)
2025-10-27 15:48:27 - flet - DEBUG - __on_message:121 - _on_message: {"action":"pageEventFromWeb","payload":{"eventTarget":"_12","eventName":"click","eventData":null}}
2025-10-27 15:48:27 - flet - DEBUG - on_event_async:856 - page.on_event_async: _12 click None
2025-10-27 15:48:29 - flet - DEBUG - __on_message:121 - _on_message: {"action":"pageEventFromWeb","payload":{"eventTarget":"_12","eventName":"click","eventData":null}}
2025-10-27 15:48:29 - flet - DEBUG - on_event_async:856 - page.on_event_async: _12 click None
2025-10-27 15:48:32 - flet_desktop - DEBUG - close_flet_view:53 - Flet View process 72950
2025-10-27 15:48:32 - flet - DEBUG - close:181 - Closing connection...
2025-10-27 15:48:32 - flet - DEBUG - close:183 - Disconnecting all pages...
2025-10-27 15:48:32 - flet - DEBUG - on_event_async:856 - page.on_event_async: page disconnect 
2025-10-27 15:48:32 - flet - DEBUG - close:189 - Shutting down thread pool...
2025-10-27 15:48:32 - __main__ - INFO - <module>:764 - Application shutdown
2025-10-27 15:48:32 - root - INFO - <module>:765 - ==================================================
